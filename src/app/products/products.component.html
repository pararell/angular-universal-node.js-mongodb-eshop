<div class="main">
  <div class="container">

    <div class="progress" *ngIf="!(items$ | async)?.products">
      <div class="indeterminate"></div>
    </div>

    <div class="wrapper" *ngIf="(items$ | async) as items">
      <div class="sidebar-wrap">
        <app-sidebar
        [categories]="categories$ | async"
        [price]="filterPrice$ | async"
        [minPrice]="items?.maxPrice"
        [maxPrice]="items?.minPrice"
        [activeCategory]="category$ | async"
        (changePrice)="priceRange($event)">
        </app-sidebar>
      </div>
      <div class="main-wrap">
        <h3 class="category-title" *ngIf="(category$ | async) as category">{{category}}</h3>
          <app-products-list
            [products]="items?.products"
            [cartIds]="items?.cartIds"
            (addProduct)="addToCart($event)"
            (removeProduct)="removeFromCart($event)">
          </app-products-list>

          <ul class="pagination" *ngIf="!(category$ | async) && (pagination$ | async) as pagination">
            <ng-container *ngIf="(page$ | async) as page">
                <li [class.disabled]="!page || page == 1"><a (click)="changePage(page - 1)"><i class="material-icons">chevron_left</i></a></li>
            </ng-container>
              <li class="waves-effect" *ngFor="let page of pagination.range"
              [class.active]="pagination.page === page"><a (click)="changePage(page)">{{ page }}</a>
              </li>
            <ng-container *ngIf="(page$ | async) as page">
              <li [class.disabled]="page == pagination.pages.length"><a (click)="changePage(page + 1)"><i class="material-icons">chevron_right</i></a></li>
            </ng-container>
            </ul>
      </div>
    </div>

  </div>
</div>
